function create_custom_dropdowns(){$("select").each(function(t,e){if(!$(this).next().hasClass("filter-dropdown")){$(this).after('<div class="filter-dropdown '+($(this).attr("class")||"")+'" tabindex="0"><span class="current"></span><div class="list"><ul></ul></div></div>');var i=$(this).next(),s=$(e).find("option"),o=$(this).find("option:selected");i.find(".current").html(o.data("display-text")||o.text()),s.each(function(t,e){var s=$(e).data("display-text")||"";i.find("ul").append('<li class="option '+($(e).is(":selected")?"selected":"")+'" data-filter="'+$(e).val()+'" data-value="'+$(e).val()+'" data-display-text="'+s+'">'+$(e).text()+"</li>")})}})}$(document).on("click",".filter-dropdown",function(t){$(".filter-dropdown").not($(this)).removeClass("open"),$(this).toggleClass("open"),$(this).hasClass("open")?($(this).find(".option").attr("tabindex",0),$(this).find(".selected").focus()):($(this).find(".option").removeAttr("tabindex"),$(this).focus())}),$(document).on("click",function(t){0===$(t.target).closest(".filter-dropdown").length&&($(".filter-dropdown").removeClass("open"),$(".filter-dropdown .option").removeAttr("tabindex")),t.stopPropagation()}),$(document).on("click",".filter-dropdown .option",function(t){$(this).closest(".list").find(".selected").removeClass("selected"),$(this).addClass("selected");var e=$(this).data("display-text")||$(this).text();$(this).closest(".filter-dropdown").find(".current").text(e),$(this).closest(".filter-dropdown").prev("select").val($(this).data("value")).trigger("change")}),$(document).on("keydown",".filter-dropdown",function(t){var e=$($(this).find(".list .option:focus")[0]||$(this).find(".list .option.selected")[0]);if(32==t.keyCode||13==t.keyCode)return $(this).hasClass("open")?e.trigger("click"):$(this).trigger("click"),!1;if(40==t.keyCode)return $(this).hasClass("open")?e.next().focus():$(this).trigger("click"),!1;if(38==t.keyCode){if($(this).hasClass("open"))(e=$($(this).find(".list .option:focus")[0]||$(this).find(".list .option.selected")[0])).prev().focus();else $(this).trigger("click");return!1}return 27==t.keyCode?($(this).hasClass("open")&&$(this).trigger("click"),!1):void 0}),$(document).ready(function(){create_custom_dropdowns()});